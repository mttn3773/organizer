(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{131:function(e,t,n){"use strict";n.r(t);var r=n(155),s=n(1),a=n.n(s),c=n(37),i=n.n(c),o=n(148),l=n(49),u=n(141),d=n(142),j=n(143),b={endpoints:{register:"/api/user",login:"/api/user/login",logout:"/api/user/logout",me:"/api/user/me",tasks:"api/task",findById:function(e){return"api/task/".concat(e)}}},p=n(29),O=n.n(p),h=n(41),f=n(152),m=n(5),x=n(17),g=function(e,t){switch(t.type){case"SET_ERRORS":return Object(x.a)(Object(x.a)({},e),{},{errors:t.payload});case"CLEAR_ERRORS":return Object(x.a)(Object(x.a)({},e),{},{errors:[]});case"SET_LOADING":return Object(x.a)(Object(x.a)({},e),{},{loading:t.payload});case"SET_AUTH":return Object(x.a)(Object(x.a)({},e),{},{auth:t.payload});default:return e}},y=n(4),S={errors:[],loading:!1},C=Object(s.createContext)({state:S,dispatch:function(){}}),v=function(e){var t=e.children,n=Object(s.useReducer)(g,S),r=Object(m.a)(n,2),a=r[0],c=r[1],i=k().request;return Object(s.useEffect)((function(){"undefined"===typeof a.auth&&a&&i({url:b.endpoints.me}).then((function(e){c({type:"SET_AUTH",payload:!!e.user})}))}),[]),Object(y.jsx)(C.Provider,{value:{state:a,dispatch:c},children:t})},k=function(){var e=Object(s.useContext)(C).dispatch,t=Object(f.a)();return{request:function(){var n=Object(h.a)(O.a.mark((function n(r){var s,a,c,i,o,l,u,d,j,b;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=r.url,a=r.method,c=void 0===a?"GET":a,i=r.body,o=r.headers,l=void 0===o?{}:o,u=r.toastErorrs,d=void 0===u||u,n.prev=1,l.Accept="application/json, text/plain, */*",l["Content-Type"]="application/json",i=JSON.stringify(i),e({type:"SET_LOADING",payload:!0}),n.next=8,fetch(s,{method:c,body:i,headers:l});case 8:return j=n.sent,n.next=11,j.json();case 11:return(b=n.sent).success||(401===j.status&&e({type:"SET_AUTH",payload:!1}),d&&e({type:"SET_ERRORS",payload:b.errors||[{msg:"Something went wrong"}]})),b.success&&b.msg&&t({title:"Success",description:b.msg,status:"success",duration:3e3,isClosable:!0}),e({type:"SET_LOADING",payload:!1}),n.abrupt("return",b);case 18:return n.prev=18,n.t0=n.catch(1),e({type:"SET_LOADING",payload:!1}),d&&e({type:"SET_ERRORS",payload:[n.t0]}),n.abrupt("return");case 23:case"end":return n.stop()}}),n,null,[[1,18]])})));return function(e){return n.apply(this,arguments)}}()}},w=function(e){Object(l.a)(e);var t=Object(s.useContext)(C).state,n=k().request,r=null;return r=t.auth?Object(y.jsx)(u.a,{justifyContent:"center",alignItems:"center",children:Object(y.jsx)(d.a,{onClick:function(){n({url:b.endpoints.logout,method:"POST"}).then((function(){window.location.reload()}))},fontSize:"xl",color:"whiteAlpha.800",children:"LOG OUT"})}):Object(y.jsxs)(u.a,{justifyContent:"space-between",alignItems:"center",gridGap:"3rem",children:[Object(y.jsx)(d.a,{href:"/login",fontSize:"xl",color:"whiteAlpha.800",children:"SIGN IN"}),Object(y.jsx)(d.a,{href:"/register",fontSize:"xl",color:"whiteAlpha.800",children:"REGISTER"})]}),Object(y.jsxs)(u.a,{w:"100%",h:"60px",bgColor:"blackAlpha.800",mb:"1rem",position:"sticky",justifyContent:"space-between",px:"5rem",children:[Object(y.jsx)(u.a,{justifyContent:"center",alignItems:"center",children:Object(y.jsx)(j.a,{letterSpacing:"wider",fontWeight:"600",fontSize:"2xl",color:"whiteAlpha.800",children:"ORG"})}),r]})},T=n(36),I=n(154),A=function(){return Object(y.jsxs)(T.a,{isOpen:!0,onClose:function(){},children:[Object(y.jsx)(T.f,{}),Object(y.jsx)(T.c,{background:"rgba(0, 0, 0, 0.5)",children:Object(y.jsx)(T.b,{display:"flex",textAlign:"center",justifyItems:"center",padding:"5rem 5rem",children:Object(y.jsx)(I.a,{isIndeterminate:!0,margin:"auto",size:"60px",color:"green.300"})})})]})},E=function(){var e=Object(s.useContext)(C),t=e.state,n=e.dispatch,r=t.errors,a=t.loading,c=Object(f.a)();return Object(s.useEffect)((function(){r&&r.length&&(r.length?r.map((function(e){return c({title:"Error",description:e.msg||"Something went wrong",status:"error",duration:3e3,isClosable:!0})})):c({title:"Error",description:"Something went wrong",status:"error",duration:3e3,isClosable:!0}),n({type:"CLEAR_ERRORS"}))}),[r]),Object(y.jsx)(y.Fragment,{children:a&&Object(y.jsx)(A,{})})},R=n(81),_=n(13),D=n(149),G=n(153),z=n(40),N=function(e){var t={};return e.map((function(e){e.param&&(t[e.param]=e.msg)})),t},L=n(107),U=n(51),W=n(145),F=n(146),H=n(147),M=function(e){var t,n=e.type,r=e.isTextArea,s=void 0!==r&&r,a=e.withLabel,c=void 0===a||a,i=Object(L.a)(e,["type","isTextArea","withLabel"]),o=Object(z.d)(i),l=Object(m.a)(o,1)[0];return Object(y.jsxs)(U.a,{id:l.name,children:[c&&Object(y.jsx)(W.a,{children:(t=l.name,t[0].toUpperCase()+t.slice(1))}),Object(y.jsx)(z.a,{name:l.name,className:"error-text",children:function(e){return Object(y.jsx)(j.a,{textAlign:"center",fontWeight:"600",color:"red.500",children:e})}}),s?Object(y.jsx)(H.a,Object(x.a)(Object(x.a)({bgColor:"whiteAlpha.500",borderColor:"blue.300",_hover:{borderColor:"blue.500"}},l),{},{type:n})):Object(y.jsx)(F.a,Object(x.a)(Object(x.a)({bgColor:"whiteAlpha.500",borderColor:"blue.300",_hover:{borderColor:"blue.500"}},l),{},{type:n}))]})},P=function(e){var t=e.url,n=k().request,r=Object(s.useContext)(C).dispatch;return Object(y.jsx)(z.c,{initialValues:{email:"",password:""},onSubmit:function(){var e=Object(h.a)(O.a.mark((function e(s,a){var c,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.setErrors,e.prev=1,e.next=4,n({url:t,method:"POST",body:s,toastErorrs:!1});case 4:if(!(i=e.sent).accessToken){e.next=8;break}return r({type:"SET_AUTH",payload:!0}),e.abrupt("return",Object(y.jsx)(_.a,{to:"/"}));case 8:if(!(o=N(i.errors))){e.next=11;break}return e.abrupt("return",c(o));case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",c(N(e.t0)));case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.errors;return Object(y.jsx)(z.b,{children:Object(y.jsxs)(u.a,{m:"0 auto",justifyItems:"center",direction:"column",gridGap:"2rem",alignItems:"center",width:"75%",border:"2px solid",p:"4rem",borderRadius:"6%",borderColor:n.email||n.password?"red.400":"green.400",children:[Object(y.jsx)(M,{type:"email",name:"email"}),Object(y.jsx)(M,{type:"password",name:"password"}),Object(y.jsx)(G.a,{type:"submit",disabled:t,children:t?Object(y.jsx)(I.a,{size:"2rem",color:"green.500",isIndeterminate:!0}):"Submit"})]})})}})},q=function(){return Object(y.jsxs)(o.a,{margin:"0 auto",w:"60%",children:[Object(y.jsx)(D.a,{mb:"3rem",fontWeight:"600",fontSize:"2xl",textAlign:"center",children:"SIGN IN"}),Object(y.jsx)(P,{url:b.endpoints.login})]})},B=n(150),Y=n(23),V=n.n(Y),J=function(e){var t=e.day,n=e.isActive,r=e.isThisMonth,s=e.isSelected,a=e.setSelected,c=e.tasks;return Object(y.jsxs)(u.a,{onClick:r?function(){return a(t)}:function(){},h:{sm:"4rem",base:"3rem"},w:{sm:"75%",base:"100%"},alignItems:"center",justifyContent:"space-around",bgColor:r?"blue.200":"gray.300",border:s&&r?"2px":"none",borderColor:"green.500",borderRadius:"12px",overflow:"hidden",position:"relative",direction:"column",cursor:r?"pointer":"auto",children:[!!c.length&&Object(y.jsx)(u.a,{position:"absolute",borderRadius:"50%",top:"4px",right:"4px",bgColor:"yellow.200",w:"1rem",h:"1rem",justifyContent:"center",fontWeight:"600",alignItems:"center",children:c.length}),Object(y.jsx)(j.a,{color:"blackAlpha.800",fontWeight:n?800:500,w:"100%",h:"50%",textAlign:"center",children:t.format("DD")})]})},K=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Q=function(e){for(var t=e.date,n=e.tasks,r=e.setSelected,s=e.selected,a=t.clone().startOf("month").startOf("week"),c=t.clone().endOf("month").endOf("week"),i=[],o=a.clone();o.isBefore(c);)i.push(o.add(1,"day").clone());var l=function(e){return V()().isSame(e,"D")},d=function(e){return s.isSame(e,"D")},b=function(e){return t.isSame(e,"M")},p=function(e){return n.filter((function(t){return V()(t.date).isSame(e,"D")}))};return Object(y.jsxs)(B.a,{gridArea:"calendar",templateColumns:"repeat(7, 1fr)",margin:"auto",w:{md:"85%",base:"100%"},rowGap:"2rem",columnGap:{lg:"1.5rem",base:"0.7rem"},mt:"3rem",justifyItems:"center",mb:"2rem",children:[K.map((function(e,t){return Object(y.jsx)(u.a,{h:{sm:"4rem",base:"3rem"},w:{sm:"75%",base:"100%"},alignItems:"center",justifyContent:"space-around",bgColor:"blue.200",borderColor:"green.500",borderRadius:"12px",overflow:"hidden",direction:"column",children:Object(y.jsx)(j.a,{color:"blackAlpha.800",as:"b",w:"100%",h:"50%",textAlign:"center",children:e})},t)})),i.map((function(e){return Object(y.jsx)(J,{tasks:p(e),isSelected:d(e),setSelected:r,day:e,isActive:l(e),isThisMonth:b(e)},e.clone().toString())}))]})},X=n(22),Z=n(47),$=function(e){var t=e.date,n=e.setTasks,r=e.initialValues,a=void 0===r?{title:"",description:"",date:""}:r,c=e.isUpdating,i=void 0!==c&&c,o=e.taskId,l=e.hadnleClose,d=e.bgColor,j=void 0===d?"blue.100":d,p=Object(s.useContext)(C).state,f=k().request,m=a.date?V()(a.date).format("HH:mm"):"",g=function(){var e=Object(h.a)(O.a.mark((function e(r,s){var a,c,u,d,j,p;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.setErrors,e.prev=1,r.date){e.next=4;break}return e.abrupt("return",a({date:"Invalid date"}));case 4:return c=parseInt(r.date.split(":")[1]),u=parseInt(r.date.split(":")[0]),d=t.clone().set("minutes",c).set("hours",u).set("seconds",0).toISOString(),e.next=9,f({url:i&&o?b.endpoints.findById(o):b.endpoints.tasks,method:i?"PUT":"POST",body:Object(x.a)(Object(x.a)({},r),{},{date:d}),toastErorrs:!0});case 9:if(!(j=e.sent).success||!j.task){e.next=15;break}return i&&n((function(e){return e.filter((function(e){return e._id!==o}))})),l(),n((function(e){return[].concat(Object(X.a)(e),[j.task])})),e.abrupt("return");case 15:(p=N(j.errors))&&a(p),e.next=22;break;case 19:return e.prev=19,e.t0=e.catch(1),e.abrupt("return",a(N(e.t0)));case 22:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(y.jsx)(u.a,{bgColor:j,w:"100%",justifyContent:"center",children:Object(y.jsx)(z.c,{initialValues:Object(x.a)(Object(x.a)({},a),{},{date:m}),onSubmit:g,children:function(e){var t=e.isSubmitting;return Object(y.jsx)(z.b,{children:Object(y.jsxs)(u.a,{pt:"1rem",pb:"1rem",m:"0 auto",justifyItems:"center",direction:"column",alignItems:"center",width:"100%",position:"relative",children:[Object(y.jsx)(u.a,{position:"absolute",top:"4px",right:"2px",cursor:"pointer",color:"red.500",zIndex:"999",onClick:l,children:Object(y.jsx)(Z.d,{size:"1.4rem"})}),Object(y.jsx)(M,{type:"text",name:"title"}),Object(y.jsx)(M,{isTextArea:!0,type:"text",name:"description"}),Object(y.jsx)(M,{type:"time",name:"date"}),Object(y.jsx)(G.a,{colorScheme:"blue",mt:"1rem",type:"submit",disabled:t||p.loading,children:t?Object(y.jsx)(I.a,{size:"2rem",color:"green.500",isIndeterminate:!0}):"Submit"})]})})}})})},ee=n(151),te=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.handleDelete,a=Object(s.useContext)(C).state,c=function(){return n(!1)},i=Object(s.useRef)(null);return Object(y.jsx)(ee.a,{isOpen:t,leastDestructiveRef:i,onClose:c,children:Object(y.jsx)(T.f,{children:Object(y.jsxs)(ee.b,{children:[Object(y.jsx)(T.e,{fontSize:"lg",fontWeight:"bold",children:"Delete Task"}),Object(y.jsx)(T.b,{children:"Are you sure? You can't undo this action afterwards."}),Object(y.jsxs)(T.d,{children:[Object(y.jsx)(G.a,{ref:i,onClick:c,children:"Cancel"}),Object(y.jsx)(G.a,{disabled:a.loading,colorScheme:"red",onClick:function(){return r().then((function(){return c()}))},ml:3,children:"Delete"})]})]})})})},ne=n(104),re=function(e){var t=e.task,n=e.index,r=e.setFormOpen,s=e.openDialog,a=e.setTaskToUpdate;return Object(y.jsxs)(u.a,{direction:"column",textAlign:"center",position:"relative",gridGap:"1rem",w:"100%",pt:"2rem",pb:"2rem",bgColor:n%2===0?"gray.200":"gray.100",children:[Object(y.jsxs)(u.a,{position:"absolute",justifyItems:"center",alignItems:"center",left:"20px",top:"15px",cursor:"pointer",gridGap:"1rem",children:[Object(y.jsx)(Z.a,{size:"1.4rem",color:"#ec5c5c",onClick:function(){return s(t._id)}}),Object(y.jsx)(ne.a,{size:"1.1rem",onClick:function(){r(!1),a(t._id)}})]}),Object(y.jsx)(D.a,{size:"md",children:t.title}),Object(y.jsxs)(j.a,{children:[V()(t.date).format("HH:mm")," "]}),Object(y.jsx)(j.a,{fontStyle:t.description?"normal":"italic",children:t.description||"No description"})]},t._id)},se=function(e){var t=e.tasks,n=e.date,r=e.setTasks,a=k().request,c=Object(s.useState)(!1),i=Object(m.a)(c,2),l=i[0],d=i[1],p=Object(s.useState)(),f=Object(m.a)(p,2),x=f[0],g=f[1],S=Object(s.useState)(),C=Object(m.a)(S,2),v=C[0],w=C[1],T=Object(s.useState)(!1),I=Object(m.a)(T,2),A=I[0],E=I[1],R=function(e){g(e),d(!0)},_=function(){var e=Object(h.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,a({url:b.endpoints.findById(x),method:"DELETE"});case 4:(t=e.sent).success&&t.task&&r((function(e){return e.filter((function(e){return e._id!==t.task._id}))}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(y.jsx)(o.a,{pb:"2rem",borderLeft:"1px solid",borderColor:"gray.200",bgColor:"gray.100",gridArea:"details",height:{base:"auto",md:"90vh"},overflowY:"scroll",children:Object(y.jsxs)(u.a,{direction:"column",justifyContent:"center",alignItems:"center",children:[Object(y.jsx)(te,{isOpen:l,setIsOpen:d,handleDelete:_}),t.length?t.sort((function(e,t){return V()(e.date).isBefore(V()(t.date))?-1:1})).map((function(e,t){return e._id===v?Object(y.jsx)($,{bgColor:t%2===0?"gray.200":"gray.100",hadnleClose:function(){return w(void 0)},setTasks:r,date:n,isUpdating:!0,taskId:e._id,initialValues:{date:e.date,title:e.title,description:e.description}},e._id):Object(y.jsx)(re,{index:t,openDialog:R,setFormOpen:E,setTaskToUpdate:w,task:e},e._id)})):Object(y.jsx)(j.a,{fontStyle:"italic",textAlign:"center",children:"No tasks were found"}),!A&&Object(y.jsx)(G.a,{mt:"3rem",colorScheme:"blue",onClick:function(){w(void 0),E(!0)},children:"ADD NEW"}),A&&Object(y.jsx)($,{hadnleClose:function(){return E(!1)},setTasks:r,date:n})]})})},ae=function(e){var t=e.date,n=e.setDate,r=e.numberOfTasks,s=function(e){n((function(t){return t.clone().add(e,"month")}))};return Object(y.jsxs)(u.a,{gridArea:"selector",margin:"auto",w:"40%",justifyContent:"space-around",alignItems:"center",children:[Object(y.jsx)(G.a,{onClick:function(){return s(-1)},children:Object(y.jsx)(Z.b,{})}),Object(y.jsx)(u.a,{borderRadius:"50%",bgColor:"red.300",w:"2rem",h:"2rem",fontWeight:"600",justifyContent:"center",alignItems:"center",position:{sm:"relative",base:"absolute"},right:{sm:"",base:"10px"},children:r}),Object(y.jsx)(j.a,{textAlign:"center",children:t.format("MMM YYYY")}),Object(y.jsx)(G.a,{onClick:function(){return s(1)},children:Object(y.jsx)(Z.c,{})})]})},ce=function(){var e=Object(s.useState)(V()()),t=Object(m.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(V()()),c=Object(m.a)(a,2),i=c[0],o=c[1],l=Object(s.useState)([]),u=Object(m.a)(l,2),d=u[0],j=u[1],p=k().request;return Object(s.useEffect)((function(){p({url:b.endpoints.tasks}).then((function(e){return j(e.tasks)}))}),[]),Object(y.jsxs)(B.a,{gridAutoColumns:"2fr 1fr 1fr",gridTemplateRows:"auto",templateAreas:{md:'\n        "selector selector selector" \n        "calendar calendar details"\n        ',base:'\n          "selector selector selector"\n          "calendar calendar calendar"\n          "details details details"'},children:[Object(y.jsx)(ae,{numberOfTasks:d.filter((function(e){return V()(e.date).month()===n.clone().month()})).length,date:n,setDate:r}),Object(y.jsx)(Q,{date:n,setSelected:o,selected:i,tasks:d}),Object(y.jsx)(se,{setTasks:j,date:i,tasks:d.filter((function(e){return V()(e.date).isSame(i,"D")}))})]})},ie=function(e){return Object(l.a)(e),Object(y.jsxs)(o.a,{margin:"0 auto",w:"60%",children:[Object(y.jsx)(D.a,{mb:"3rem",fontWeight:"600",fontSize:"2xl",textAlign:"center",children:"SIGN UP"}),Object(y.jsx)(P,{url:b.endpoints.register})]})},oe=function(e){Object(l.a)(e);var t=Object(s.useContext)(C).state.auth;return"undefined"===typeof t?null:Object(y.jsx)(R.a,{children:t?Object(y.jsxs)(_.d,{children:[Object(y.jsx)(_.b,{component:ce,path:"/profile"}),Object(y.jsx)(_.a,{to:"/profile"})]}):Object(y.jsxs)(_.d,{children:[Object(y.jsx)(_.b,{component:ie,path:"/register"}),Object(y.jsx)(_.b,{component:q,path:"/login"}),Object(y.jsx)(_.a,{to:"/login"})]})})};var le=function(){return Object(y.jsx)(o.a,{className:"App",children:Object(y.jsxs)(v,{children:[Object(y.jsx)(w,{}),Object(y.jsx)(E,{}),Object(y.jsx)(oe,{})]})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,156)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),r(e),s(e),a(e),c(e)}))};i.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(r.a,{children:Object(y.jsx)(le,{})})}),document.getElementById("root")),ue()}},[[131,1,2]]]);
//# sourceMappingURL=main.c829f2a6.chunk.js.map